{% extends 'basic.html' %}
{% block title %} <title> Detail Page</title> {% endblock %}

{% block css %}
<style>
.navbar navbar-expand-lg navbar-dark bg-primary{

position: fixed ;;
}
</style>
{% endblock %}

{% block body %}

<div class="container mt-2">
  <div class="row">
    <div class="col-md-4">

      <img src="/media/{{product.image}}" width="300px" height="250px">
      <a href= "/checkout"><button class="btn btn-light my-4 ml-3 " title="Buy Now">Buy Now</a></button>
      <button class="btn btn-warning btn-outline-black my-4 ml-2 cart" id="cart{{i.id}}" title="Add to Cart">Add to cart</button>
    </div>

    <div class="col-md-8">
      <h5>{{product.brand_name}}</h5>
      <h5>{{product.product_name}}</h5>
      <h5>â‚¹{{product.price}}</h5>
      <h5>{{product.category}}</h5>

      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Culpa porro unde, nobis, dicta delectus nostrum
        eligendi aperiam blanditiis adipisci fugiat similique assumenda minus nulla minima iure. Fugiat odit possimus
        voluptates, officia eos aspernatur voluptas?</p>


    </div>
  </div>
  {% endblock %}
  {% block js %}
  <script>
    
    document.getElementById("nav").setAttribute("class", "navbar navbar-expand-lg navbar-dark bg-primary")

    if (localStorage.getItem('cart') == null) {
    var cart = {};
  }
  else {
    cart = JSON.parse(localStorage.getItem('cart'));
    document.getElementById('cart').innerHTML = Object.keys(cart).length;
    console.log("ih");
    console.log(Object.keys);
    console.log(Object.keys(cart));
    console.log(Object.keys(cart).length);
    console.log("ih");
  }
  
  $('.cart').click(function(){
    console.log('clicked');
    var idstr = this.id.toString();
    console.log(idstr);
    if (cart[idstr] == undefined){
      cart[idstr] = 1;
    }
    else{
      cart[idstr] = cart[idstr] + 1;
    }
    console.log(Object.keys(cart[idstr]).length);
    // console.log(cart);
    localStorage.setItem('cart', JSON.stringify(cart));
});
$('#popovercart').popover();
document.getElementById('popovercart').setAttribute('data-content','<h5>Cart Items</h5>');  


</script>
  

{% endblock %}





