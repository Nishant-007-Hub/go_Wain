{% extends 'blog/basic.html' %}

{% block body %}
<div class="container">
  <div class="row">
    <div class="col-md-8">
      <h3 class="pb-4 mb-4 fst-italic border-bottom">
        {{param.title}}
      </h3>
      <input type="hidden" id="count" value={{length}}>

      <article class="blog-post">
        <h2 class="blog-post-title">{{param.head0}}
        </h2>
        <p class="blog-post-meta">{{param.pub_date}} by <a href="#">Nishant</a></p>

        <p>{{param.chead0}}</p>
        <hr>

        <h3>{{param.head1}}</h3>
        <p>{{param.chead1}}</p>
        <hr>

        <h3>{{param.head2}}</h3>
        <p>{{param.chead2}}</p>
      </article>
      <div class="fb-like" data-href="http://127.0.0.1:8000/blog/blogpost/{{param.post_id}}" data-width="" data-layout="button_count" data-action="like" data-size="large" data-share="true"></div>
    </div>
  </div>
  
  <div class="fb-comments" data-href="http://127.0.0.1:8000/blog/blogpost/{{param.post_id}}" data-width="" data-numposts="5"></div>
</div>
<div class="container row">
  <button style="margin-left: 2%;" id="prev" class="btn btn-primary mb-3">&#8592 Prev Blog</button>
  <button style="margin-left: 70%;" id="next" class="btn btn-primary mb-3"> Next Blog&#8594</button>
</div>
{% endblock body %}

{% block js %}
<script>
  count = document.getElementById("count").value
  console.log(count)
  let url = window.location.href;
  b = url.slice(-1)
  console.log(b, "b")
  b = parseInt(b)
  document.getElementById("prev").addEventListener("click", () => {
    console.log("clicked")
    if (b == 1) {
      alert("first blog")
    } else {
      window.location.href = ` ${b - 1} `
    }
  })
  document.getElementById("next").addEventListener("click", () => {
    if (b == count) {
      alert("last blog")
      console.log("next")
    } else {
      window.location.href = ` ${b + 1} `
    }
  })

</script>
{% endblock js %}